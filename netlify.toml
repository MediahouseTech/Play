[build]
  command = "npm install"
  publish = "."
  functions = "netlify/functions"

[build.environment]
  NODE_VERSION = "18"

[functions]
  node_bundler = "esbuild"

# Redirect /api/* to Netlify Functions
[[redirects]]
  from = "/api/config"
  to = "/.netlify/functions/config"
  status = 200

[[redirects]]
  from = "/api/stream-status"
  to = "/.netlify/functions/stream-status"
  status = 200

[[redirects]]
  from = "/api/break-mode"
  to = "/.netlify/functions/break-mode"
  status = 200

[[redirects]]
  from = "/api/mux-webhook"
  to = "/.netlify/functions/mux-webhook"
  status = 200

[[redirects]]
  from = "/api/recordings"
  to = "/.netlify/functions/recordings"
  status = 200

[[redirects]]
  from = "/api/debug-mux"
  to = "/.netlify/functions/debug-mux"
  status = 200

[[redirects]]
  from = "/api/create-livestream"
  to = "/.netlify/functions/create-livestream"
  status = 200
