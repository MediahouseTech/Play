# PLAY Project Handoff - January 13, 2026

## Quick Start for New Chat

Copy this entire document into a new Claude chat to continue working on PLAY.

---

## Project Overview

**PLAY** is a Mediahouse crew monitoring dashboard for live streaming events. It provides real-time stream monitoring, VU meters, break mode controls, and a recordings manager.

**Repository:** `/Users/m4server/Documents/play`
**GitHub:** MediahouseTech/Play (private)
**Current Branch:** `staging`

---

## Hosting Architecture

### Production
- **URL:** https://play.mediahouse.com.au
- **Host:** Netlify (site: `play-mediahouse`)
- **Branch:** `main`
- **Auto-deploy:** Yes, on push to main

### Staging
- **URL:** https://staging--play-mediahouse.netlify.app
- **Host:** Netlify (same site, branch deploy)
- **Branch:** `staging`
- **Auto-deploy:** Yes, on push to staging

### Environment Variables (Netlify)
```
MUX_TOKEN_ID=<stored in Netlify>
MUX_TOKEN_SECRET=<stored in Netlify>
MUX_WEBHOOK_SECRET=<stored in Netlify>
```

---

## Current Git Status (as of Jan 13, 2026)

```
Branch: staging (up to date with main)
Latest commit: 115f632 - fix: Make LIVE badge muted/subdued
```

Both `main` and `staging` are in sync - clean checkpoint.

---

## Roadmap Progress

| Phase | Task | Status |
|-------|------|--------|
| 1 | Create Mux Livestream from Settings | âœ… Done |
| 2 | Variable stream count (1-4) | âœ… Done |
| 3 | Verify blob isolation | âœ… Done |
| 4 | Reset dashboard to 0 streams | âœ… Done |
| 5 | **Create 4 Yabun Festival streams** | **ðŸ‘ˆ NEXT** |
| 6 | Test with real encoders (OBS, BMD Web Presenter) | Pending |
| 7 | Final polish & production deploy | Pending |

---

## Phase 5: Create Yabun Festival 2026 Streams

**Goal:** Create 4 live streams for Yabun Festival using the Settings UI

**Steps:**
1. Open https://staging--play-mediahouse.netlify.app
2. Click Settings â†’ Enter producer password (`Live2Stream`)
3. Go to Streams section
4. Click "Add Stream" 4 times, naming each stream (get names from Scott)
5. Each click calls Mux API to create a livestream and auto-populates IDs
6. Save Streams
7. Test with real encoders

**Stream names needed from Scott:**
- Stream 1: Main Stage
- Stream 2: Yabun Yarns
- Stream 3: Speak Out
- Stream 4: Corroboree

---

## Key Technical Details

### Tech Stack
- Frontend: Static HTML/CSS/JS (no framework)
- Backend: Netlify Functions (serverless)
- Storage: Netlify Blobs (key-value)
- Video: Mux (live streaming + VOD)
- VU Meters: WebSocket to audio-ws.mediahouse.com.au

### Key Files
```
/js/app.js              - Main dashboard logic
/js/settings.js         - Settings modal, stream management, break mode
/js/recordings.js       - Recording manager
/css/dashboard.css      - All dashboard styles
/netlify/functions/     - API endpoints
```

### API Endpoints
```
/api/config             - Dashboard configuration (GET/POST)
/api/stream-status      - Live stream status from Mux
/api/break-mode         - Break mode state per stream
/api/create-livestream  - Create new Mux livestream
/api/recordings         - Recordings index management
/api/mux-webhook        - Receives Mux webhook events
```

---

## UX Standards (Remember These!)

**"Quiet Normal, Loud Problem"**
- Default/normal states: muted, subdued colors
- Alert/problem states: prominent, demanding attention
- Example: LIVE badge is gray/muted, BREAK badge is red/prominent

**Proactive UI Evaluation**
- Claude should flag UI issues without being asked
- Research broadcast UI patterns (vMix, OBS, Wirecast)
- Consider production environment context (busy, glanceable)

---

## Local Staging on Proxmox (Cost Optimization)

### Why?
- Netlify charges for build minutes and bandwidth
- Local staging = unlimited free testing
- Only deploy to Netlify staging for final verification

### Proposed Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PROXMOX HOST                          â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚           LXC Container: play-staging             â”‚   â”‚
â”‚  â”‚                                                   â”‚   â”‚
â”‚  â”‚   Node.js + Netlify CLI                          â”‚   â”‚
â”‚  â”‚   â””â”€â”€ netlify dev (serves site locally)          â”‚   â”‚
â”‚  â”‚                                                   â”‚   â”‚
â”‚  â”‚   Git clone of Play repo                         â”‚   â”‚
â”‚  â”‚   Environment variables configured               â”‚   â”‚
â”‚  â”‚                                                   â”‚   â”‚
â”‚  â”‚   Internal URL: http://play-staging.local:8888   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                          â”‚
â”‚  Cloudflare Tunnel (optional):                          â”‚
â”‚  â””â”€â”€ play-staging.mediahouse.com.au â†’ localhost:8888    â”‚
â”‚                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Setup Steps (for future implementation)

1. **Create LXC Container on Proxmox**
   ```bash
   # Ubuntu 22.04 LXC, 2GB RAM, 20GB disk
   pct create 300 local:vztmpl/ubuntu-22.04-standard_22.04-1_amd64.tar.zst \
     --hostname play-staging --memory 2048 --cores 2 --rootfs local-lvm:20
   ```

2. **Install Dependencies**
   ```bash
   apt update && apt install -y git curl
   curl -fsSL https://deb.nodesource.com/setup_20.x | bash -
   apt install -y nodejs
   npm install -g netlify-cli
   ```

3. **Clone Repo & Configure**
   ```bash
   git clone https://github.com/MediahouseTech/Play.git /opt/play
   cd /opt/play
   
   # Create .env file with Mux credentials
   cat > .env << EOF
   MUX_TOKEN_ID=your-token-id
   MUX_TOKEN_SECRET=your-token-secret
   MUX_WEBHOOK_SECRET=your-webhook-secret
   EOF
   ```

4. **Run Local Dev Server**
   ```bash
   cd /opt/play
   netlify dev --port 8888
   ```

5. **Optional: Cloudflare Tunnel for External Access**
   ```bash
   cloudflared tunnel --url http://localhost:8888
   ```

### Workflow with Local Staging

```
Development:
1. Edit files on Mac
2. Push to GitHub staging branch
3. SSH into Proxmox container, git pull
4. Test at http://play-staging.local:8888
5. When ready, Netlify auto-deploys staging branch

Production:
1. Test thoroughly on local staging
2. Merge staging â†’ main
3. Netlify auto-deploys to production
```

### Cost Savings
- Netlify Free Tier: 300 build minutes/month
- Local staging: Unlimited builds, zero cost
- Only use Netlify builds for final staging verification

---

## Scott's Working Style (For Claude)

- Basic HTML/CSS knowledge, limited JavaScript
- Cannot write code from scratch but follows clear instructions
- Works across Mac Mini, MacBook, iPad - GitHub is source of truth
- Uses Nova (Mac HTML editor) for file editing
- Needs EXACT instructions with time estimates
- Explain WHY each step matters
- Celebrate milestones!
- NO comments in bash code blocks (copy/paste breaks)

**Claude has FILESYSTEM access** - edit files directly, don't ask Scott to copy/paste code.

---

## Files to Reference

Project documentation in `/support-docs/`:
- `PLAY-ARCHITECTURE.md` - System overview
- `API-REFERENCE.md` - All endpoints
- `MUX-INTEGRATION.md` - Video infrastructure
- `FEATURE-ROADMAP.md` - What's done, what's planned
- `CODING-PATTERNS.md` - Code conventions

---

## Immediate Next Steps

1. **Create 4 streams** via Settings UI on staging:
   - Main Stage
   - Yabun Yarns
   - Speak Out
   - Corroboree
2. **Test with real encoders:**
   - OBS Studio (software encoder)
   - Blackmagic Web Presenter (hardware encoder)
3. **Verify webhooks** are updating status correctly
4. **Test break mode** on each stream
5. **Final QA** then merge to main

---

## Commands Reference

```bash
# Check status
cd /Users/m4server/Documents/play && git status

# Switch branches
git checkout staging
git checkout main

# Deploy workflow
git add -A && git commit -m "message" && git push origin staging

# Merge to production
git checkout main && git merge staging && git push origin main && git checkout staging
```

---

*Handoff created: January 13, 2026*
*Last commit: 115f632*
